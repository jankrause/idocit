#summary Describes the concept for context sensitive role recommendations

= Introduction =

The aim of context sensitive role recommendation is to reduce the set of recommended thematic roles for the selected signature element. This way we want to simplify the usage of iDocIt!.

= Issues =

The following issues refer to this feature:

[http://code.google.com/p/idocit/issues/detail?id=79 Issue 79]

= Concept =

The basic idea is to define rules which enable or disable the recommendation of a thematic role for a given signature element.

==Kinds of Rules==

*Role-based rules:* this kind of rules define whether a thematic role is allowed to be defined only on interface-level, only on operation-level or both. A role-based rule is an attribute of a thematic role. Each thematic role as exactly one role-based rule.

*Grid-based rules:* grid-based rules are used to define when a thematic role is shown as recommendation within a thematic grid. A Grid-based rule is an attribute of a thematic role in a thematic grid. Each thematic role in the grid has exactly one grid-based rule.

== Grammar of Rule Language in BNF ==

{{{
Rule := Predicate

Predicate :=  SimplePredicate 
            | CompositePredicate
            | NegatedPredicate 

SimplePredicate := isSingular (Role, SignatureElement)
               | isPlural (Role, SignatureElement)
               | hasAttributes (Role, SignatureElement)
               | exists ( Role, SignatureElement)
               | default

CompositePredicate := ( Predicate BinaryOperator Predicate)

NegatedPredicate := not ( Predicate)

BinaryOperator := AND | OR

Role := AGENT | ACTION | COMPARISON | ...

SignatureElement := DataStructure from de.akra.idocit.common
}}}

= Implementation =

== Graphical User Interface and Use Model ==

===Preference Page: Thematic Roles ===

http://idocit.googlecode.com/svn/images/draft_ss_thematic_role_pp.png

=== Preference Page: Thematic Grids ===

To be done

=== EditorPart ===

To be done

=== Services ===

 * We implement the [http://code.google.com/p/idocit/source/browse/trunk/de.akra.idocit.common/src/main/java/de/akra/idocit/common/services/RuleService.java RuleService] which executes the rules.
 * The RuleService bases on the [http://download.oracle.com/javase/6/docs/api/javax/script/package-summary.html Java Scripting API] and is realized in Java Script.
 * The predicates are implemented as Java Script-functions and stored within its own js-file in the src/main/resources-folders.

= TODOs =
 * Which service provides the operations to execute the rules?
 * Which signature do the operations have?
 * In which way do the rules affect the GUI and the use model?
 * Which changes to the data structures in the common-project are required and where are these new attributes assigned to values?
 * How is the rule language implemented (Parser and Interpreter)